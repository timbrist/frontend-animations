<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Grid Collage Animation</title>
<style>
  /* The basic style, you know set the background and text color etc.*/
  *{box-sizing:border-box}
  body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:#fafafa;color:#222}
  .wrap{max-width:1000px;margin:40px auto;padding:0 20px;display:flex;flex-direction:column;align-items:center;text-align:center}
  h1{font-weight:600;font-size:clamp(20px,3vw,28px);margin:0 0 12px}
  p.tip{margin:0;color:#666;line-height:1.6}


  /* set the column number and it effects on the layout of the images */
  .grid-collage{
    width:100%;
    display:grid;
    grid-template-columns:repeat(12,1fr);
    grid-auto-rows:32px;
    gap:8px
   }

  .grid-collage figure{margin:0;position:relative;overflow:hidden;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,.12);cursor:pointer;will-change:transform,opacity;transition:box-shadow .3s ease}
  .grid-collage figure.is-center{z-index:3}
  .grid-collage img{width:100%;height:100%;object-fit:cover;display:block}
  .grid-collage figcaption{position:absolute;left:10px;bottom:10px;padding:6px 10px;font-size:12px;line-height:1;color:#fff;background:rgba(0,0,0,.45);border-radius:999px;user-select:none}
  
  /* set the layout of the images 
   grid-column: <start-line> / <end-line>;
   grid-row: the row of the image.
  */
  .pos-a{grid-column:2/5;grid-row:3/7}
  .pos-b{grid-column:9/11;grid-row:2/7}
  .pos-c{grid-column:5/9;grid-row:1/12}
  .pos-d{grid-column:4/6;grid-row:9/14}
  .pos-e{grid-column:8/11;grid-row:10/14}

  .image-info{width:100%;margin-top:64px}
  
</style>
</head>
<body>
<section style="height:100vh;display:flex;align-items:center;justify-content:center;padding:4rem 6vw"><h1>1st Screen Section</h1></section>
<section class="wrap">
  <div class="grid-collage">
    <figure class="pos-a" data-name="Mountain" data-desc="壮丽的山峰景色，白雪覆盖的山顶在阳光下闪耀">
      <img src="https://picsum.photos/id/1015/800/1200" alt="mountain">
      <figcaption>Mountain</figcaption>
    </figure>
    <figure class="pos-b" data-name="Dog" data-desc="可爱的小狗正在草地上玩耍，享受着温暖的阳光">
      <img src="https://picsum.photos/id/1025/1200/800" alt="dog">
      <figcaption>Dog</figcaption>
    </figure>
    <figure class="pos-c is-center" data-name="Bridge" data-desc="古老的木桥横跨河流，连接着两岸的美丽风景">
      <img src="https://picsum.photos/id/1003/1000/1200" alt="bridge">
      <figcaption>Bridge</figcaption>
    </figure>
    <figure class="pos-d" data-name="Field" data-desc="金色的麦田在微风中摇曳，展现着丰收的喜悦">
      <img src="https://picsum.photos/id/1035/1200/900" alt="field">
      <figcaption>Field</figcaption>
    </figure>
    <figure class="pos-e" data-name="Sea" data-desc="蔚蓝的大海与天空相接，海浪轻拍着沙滩">
      <img src="https://picsum.photos/id/1041/1100/900" alt="sea">
      <figcaption>Sea</figcaption>
    </figure>
  </div>
  <div class="image-info">
    <h1>Current Image: <span id="image-name">Bridge</span></h1>
    <p class="tip" id="image-desc">古老的木桥横跨河流，连接着两岸的美丽风景</p>
  </div>
</section>

<section style="height:100vh;display:flex;align-items:center;justify-content:center;padding:4rem 6vw"><h1>3rd Screen Section</h1></section>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/Flip.min.js"></script>
<script>
gsap.registerPlugin(ScrollTrigger,Flip);
document.addEventListener('DOMContentLoaded',function(){
  const wrap=document.querySelector('.wrap'),
        figs=document.querySelectorAll('.grid-collage figure'),
        nameEl=document.getElementById('image-name'),
        descEl=document.getElementById('image-desc'),
        getPos=f=>Array.from(f.classList).find(c=>c.startsWith('pos-'));
  let center=document.querySelector('.is-center'),anim=false;
  
  figs.forEach(f=>{
    // set images positions except the center image.
    const p=getPos(f),pos={a:{x:'-120%',y:'-20%'},b:{x:'120%',y:'-20%'},d:{x:'-100%',y:'50%'},e:{x:'100%',y:'50%'}}[p.slice(-1)];
    if(pos)gsap.set(f,pos);
  });
  
  const tl=gsap.timeline({scrollTrigger:{trigger:wrap,start:'top 80%',end:'top 20%',scrub:1.2}});
  //each images move to the center position.
  figs.forEach((f,i)=>tl.to(f,{x:'0%',y:'0%',ease:'sine.out',duration:2.5},i*0.1));
  
  //when user click the image, the image will move to the center position.
  figs.forEach(f=>{
    f.addEventListener('click',function(){
      if(f===center||anim)return;
      anim=true;
      figs.forEach(fig=>gsap.set(fig,{scale:1}));
      const state=Flip.getState(figs),cp=getPos(f),cep=getPos(center);
      f.classList.replace(cp,cep);
      center.classList.replace(cep,cp);
      center.classList.remove('is-center');
      f.classList.add('is-center');
      Flip.from(state,{duration:.4,ease:'power3.inOut',scale:true,onComplete:()=>anim=false});
      center=f;
      nameEl.textContent=f.dataset.name;
      descEl.textContent=f.dataset.desc;
    });

    // hover effect
    f.addEventListener('mouseenter',()=>!anim&&gsap.to(f,{scale:1.15,duration:.3,ease:'power2.out'}));
    f.addEventListener('mouseleave',()=>!anim&&gsap.to(f,{scale:1,duration:.3,ease:'power2.out'}));
  });
});
</script>
</body>
</html>